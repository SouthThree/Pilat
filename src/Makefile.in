FRAMAC_SHARE 	:= $(shell frama-c.byte -print-path)
FRAMAC_LIBDIR 	:= $(shell frama-c.byte -print-libpath)

PLUGIN_DIR ?=.

PLUGIN_NAME	:= Pilat

PLUGIN_CMI 	:= pilat_math

PLUGIN_CMO 	:= mat_option\
		float\
		qring\
		poly\
		poly_utils\
		pilat_visitors\
		lacaml_matrix\
		pilat_matrix\
		poly_assign\
		assign\
		invariant_utils\
		cil2assign\
		invar_prover\
		non_det_invar\
		acsl_gen\
		main


PLUGIN_OFLAGS 		:= -I $(dir @LACAML@) 

PLUGIN_BFLAGS 		:= -I $(dir @LACAML@)
PLUGIN_EXTRA_OPT 	:= @LACAML@ @LACAML_TOP@

PLUGIN_EXTRA_BYTE 	:= $(PLUGIN_EXTRA_OPT:.cmxa=.cma)

PLUGIN_NO_TEST		:=yes
PLUGIN_DISTRIBUTED	:=yes

include $(FRAMAC_SHARE)/Makefile.dynamic
