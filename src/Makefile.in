FRAMAC_SHARE 	:= $(shell frama-c.byte -print-path)
FRAMAC_LIBDIR 	:= $(shell frama-c.byte -print-libpath)

PLUGIN_DIR ?=.

PLUGIN_NAME	:= Pilat

PLUGIN_CMI 	:= pilat_math

PLUGIN_CMO 	:= mat_option\
		pilat_visitors\
		poly\
		lacaml_matrix\
		pilat_matrix\
		poly_affect\
		invariant_utils\
		matrix_ast\
		acsl_gen\
		main


PLUGIN_OFLAGS 		:= -I $(dir @LACAML@) -I $(dir @ZARITH@)

PLUGIN_BFLAGS 		:= -I $(dir @LACAML@) -I $(dir @ZARITH@)
PLUGIN_EXTRA_OPT 	:= @LACAML@ @LACAML_TOP@

PLUGIN_EXTRA_BYTE 	:= $(PLUGIN_EXTRA_OPT:.cmxa=.cma)

PLUGIN_NO_TEST		:=yes
PLUGIN_DISTRIBUTED	:=yes

include $(FRAMAC_SHARE)/Makefile.dynamic
